{
"version":3,
"file":"compile/rqt.js",
"lineCount":267,
"mappings":"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",
"sources":["node_modules/https/index.js","node_modules/http/index.js","node_modules/util/index.js","node_modules/erotic/src/lib.js","node_modules/os/index.js","node_modules/@artdeco/clean-stack/src/index.js","node_modules/erotic/src/callback.js","node_modules/erotic/src/index.js","node_modules/url/index.js","node_modules/stream/index.js","node_modules/catchment/src/lib/index.js","node_modules/catchment/src/index.js","node_modules/zlib/index.js","node_modules/@rqt/aqt/src/lib/make-request.js","node_modules/@rqt/aqt/src/lib/index.js","node_modules/@rqt/aqt/src/index.js","src/lib/Session.js","src/depack.js","src/lib/index.js"],
"sourcesContent":["export default https\nexport const {\n  Agent,\n  Server,\n  createServer,\n  get,\n  globalAgent,\n  request,\n} = https","export default http\nexport const {\n  Agent,\n  ClientRequest,\n  IncomingMessage,\n  METHODS,\n  OutgoingMessage,\n  STATUS_CODES,\n  Server,\n  ServerResponse,\n  createServer,\n  get,\n  globalAgent,\n  maxHeaderSize,\n  request,\n} = http","export default util\nexport const {\n  TextDecoder,\n  TextEncoder,\n  callbackify,\n  debug,\n  debuglog,\n  deprecate,\n  error,\n  format,\n  getSystemErrorName,\n  inherits,\n  inspect,\n  isArray,\n  isBoolean,\n  isBuffer,\n  isDate,\n  isError,\n  isFunction,\n  isNull,\n  isNullOrUndefined,\n  isNumber,\n  isObject,\n  isPrimitive,\n  isRegExp,\n  isString,\n  isSymbol,\n  isUndefined,\n  log,\n  print,\n  promisify,\n  puts,\n} = util","const getLastItem = (array) => {\n  const item = array[array.length - 1]\n  return item\n}\nconst getItemsFrom = (array, from) => array.slice(from)\n\n/**\n * Get a segment of the stack string, defaults are from = 0 and oneLine = false.\n * @param {string} stack the stack string\n * @param {number} [from=0] index from which to slice from\n * @param {boolean} [oneLine=false] Whether just first line must be returned\n * @returns {string} A stack segment starting from the specified line.\n */\nexport const getStackSegment = (stack, from = 0, oneLine = false) => {\n  if (from === 0 && !oneLine) {\n    return stack\n  }\n  const splitStack = stack\n    .split('\\n', oneLine ? from + 1 : undefined)\n  if (oneLine) {\n    const line = getLastItem(splitStack)\n    return line\n  } else {\n    const items = getItemsFrom(splitStack, from)\n    return items.join('\\n')\n  }\n}\n\n/**\n * Get the stack trace part of when the erotic function was called. Disregards\n * first two lines.\n * @param {string} stack error's stack\n * @param {boolean} [transparent] trim the top line as well\n * @returns {string} A part of stack\n */\nexport const getEntryStack = (stack, transparent = false) => {\n  const stackSegment = getStackSegment(stack, 2 + (transparent ? 1 : 0))\n  return stackSegment\n}\n\n/**\n * Get stack line of where the callback was called.\n * @param {string} stack Stack string.\n * @returns {string} Stack line.\n */\nexport const getCalleeStackLine = (stack) => {\n  const calleeStackLine = getStackSegment(stack, 2, true)\n  return calleeStackLine\n}\n\nexport const getStackHeading = message => `Error: ${message}`\n\n/**\n * Extract caller from the function's `arguments`.\n * @param {Object} args arguments\n * @returns {!Function} The caller function from `arguments.callee.caller`.\n */\nexport const getCallerFromArguments = (args) => {\n  const { callee: { caller } } = args\n  return caller\n}","export default os\nexport const {\n  EOL,\n  arch,\n  constants,\n  cpus,\n  endianness,\n  freemem,\n  homedir,\n  hostname,\n  loadavg,\n  networkInterfaces,\n  platform,\n  release,\n  tmpdir,\n  totalmem,\n  type,\n  uptime,\n  userInfo,\n} = os","import { homedir } from 'os'\n\nconst extractPathRegex = /\\s+at.*(?:\\(|\\s)(.*)\\)?/\nconst pathRegex = /^(?:(?:(?:node|(?:internal\\/[\\w/]*|.*node_modules\\/(?:IGNORED_MODULES)\\/.*)?\\w+)\\.js:\\d+:\\d+)|native)/\n\nconst homeDir = homedir()\n\n/**\n * Remove internal Node.JS lines from the error stack traces.\n * @param {string} stack The error stack to update.\n * @param {!_cleanStack.Config} [options] Options for the program.\n * @param {boolean} [options.pretty=false] Replace the absolute path to the home directory with the `~`. Default `false`.\n * @param {!Array<string>} [options.ignoredModules=\"\uff3b'pirates'\uff3d\"] Which modules to ignore in the path. Default `\uff3b'pirates'\uff3d`.\n */\nconst cleanStack = (stack, options) => {\n  const {\n    pretty = false, ignoredModules = ['pirates'],\n  } = options || {}\n  const j = ignoredModules.join('|')\n  const re = new RegExp(pathRegex.source.replace('IGNORED_MODULES', j))\n\n  return stack.replace(/\\\\/g, '/')\n    .split('\\n')\n    .filter(x => {\n      const pathMatches = x.match(extractPathRegex)\n      if (pathMatches === null || !pathMatches[1]) {\n        return true\n      }\n\n      const match = pathMatches[1]\n\n      // Electron\n      if (match.includes('.app/Contents/Resources/electron.asar') ||\n        match.includes('.app/Contents/Resources/default_app.asar')) {\n        return false\n      }\n\n      return !re.test(match)\n    })\n    .filter(x => x.trim())\n    .map(x => {\n      if (pretty) {\n        return x.replace(extractPathRegex, (m, p1) => m.replace(p1, p1.replace(homeDir, '~')))\n      }\n\n      return x\n    })\n    .join('\\n')\n}\n\nexport default cleanStack\n\n/* documentary types/index.xml */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {_cleanStack.Config} Config Options for the program.\n */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {Object} _cleanStack.Config Options for the program.\n * @prop {boolean} [pretty=false] Replace the absolute path to the home directory with the `~`. Default `false`.\n * @prop {!Array<string>} [ignoredModules=\"\uff3b'pirates'\uff3d\"] Which modules to ignore in the path. Default `\uff3b'pirates'\uff3d`.\n */\n","import cleanStack from '@artdeco/clean-stack'\nimport {\n  getCallerFromArguments, getCalleeStackLine, getStackHeading,\n} from './lib'\n\n/**\n * Create a callback.\n * @param {!Function} entryCaller The function which was called at entry.\n * @param {string} entryStack The first line of the error stack to be returned\n * @param {boolean} [shadow=false] Print only entry stack.\n */\nexport function makeCallback(entryCaller, entryStack, shadow = false) {\n  /**\n   * This callback should be called when an asynchronous error occurred.\n   * @param {(string|Error)} messageOrError A message string or an _Error_ object at the point of actual error.\n   * @returns {Error} An error with the updated stack which includes the callee.\n   */\n  function cb(messageOrError) {\n    const caller = getCallerFromArguments(arguments)\n    const { stack: errorStack } = new Error()\n    const calleeStackLine = getCalleeStackLine(errorStack)\n    const isError = messageOrError instanceof Error\n    const message = isError ? messageOrError.message : messageOrError\n\n    const stackHeading = getStackHeading(message)\n    const entryHasCallee = caller !== null && entryCaller === caller\n    const stackMessage = [\n      stackHeading,\n      ...(entryHasCallee || shadow ? [entryStack] : [\n        calleeStackLine,\n        entryStack,\n      ]),\n    ].join('\\n')\n\n    const stack = cleanStack(stackMessage)\n    const properties = { message, stack }\n    const e = isError ? messageOrError : new Error()\n\n    return /** @type {Error} */ (Object.assign(/** @type {!Object} */ (e), properties))\n  }\n\n  return cb\n}","import {\n  getEntryStack, getCallerFromArguments,\n} from './lib'\nimport { makeCallback } from './callback'\n\n/**\n * Returns a function to create an error with a stack trace starting at the line in code when the call was made by the callee.\n * @param {boolean} [transparent] Pretend as if the call to the function lead to the error, without exposing any of the internal stack.\n */\nexport default function erotic(transparent) {\n  const { stack } = new Error()\n  const caller = getCallerFromArguments(arguments)\n  const entryStack = getEntryStack(stack, transparent)\n\n  return makeCallback(caller, entryStack, transparent)\n}","export default url\nexport const {\n  URL,\n  URLSearchParams,\n  Url,\n  domainToASCII,\n  domainToUnicode,\n  format,\n  parse,\n  resolve,\n} = url","export default stream\nexport const {\n  Duplex,\n  PassThrough,\n  Readable,\n  Stream,\n  Transform,\n  Writable,\n} = stream","/**\n * Listens for the `error` event once so that when an error in _streamB_ is emitted, is is also emitted in the _streamA_.\n * @param {stream.Stream} streamA The stream that will emit an error once it's caught in the `streamB`.\n * @param {stream.Stream} streamB The stream from which the error originates.\n * @returns The stream the error is listened on, i.e., transparent to calling the `.once` method on that stream.\n */\nexport const pipeError = (streamA, streamB) => {\n  streamB\n    .once('error', e => {\n      streamA.emit('error', e)\n    })\n  return streamB\n}\n\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {import('stream').Stream} stream.Stream\n */","import { Writable } from 'stream'\nimport erotic from 'erotic'\nimport cleanStack from '@artdeco/clean-stack'\nimport { pipeError } from './lib'\n\nfunction joinBufferData(array) {\n  return array.join('')\n}\n\n/**\n * A writable stream which collects incoming data into memory, and provides a promise to way for the stream to finish. The promise is resolved with joined chunks.\n */\nexport default class Catchment extends Writable {\n  /**\n   * Create a new catchment to pipe a readable stream into and collect all emitted data.\n   * @param {!_catchment.Options} [options] Options to pass to the `Writable` super constructor, and others shown below.\n   * @param {!stream.Readable} [options.rs] A readable stream to automatically pipe into the catchment. If an error occurs during reading of this stream, the catchment promise will be rejected with it.\n   * @param {boolean} [options.binary=false] Whether to return a raw buffer instead of a string. The string is created by joining all incoming chunks together with `.join('')` method. Default `false`.\n   * @example\n   *\n   * import { createReadStream } from 'fs'\n   * import Catchment from 'catchment'\n   *\n   * const rs = createReadStream('file.txt')\n   * const { promise } = new Catchment({ rs })\n   * const res = await promise\n   */\n  constructor(options) {\n    const {\n      binary = false, rs = null, ...opts\n    } = options || {}\n    /** @suppress {missingProperties} */\n    const { er = erotic(true), proxyError } = options || {}\n    const wrap = (_, e) => er(e)\n    super(/** @type {!stream.WritableOptions} */ (opts))\n    this._caughtData = []\n    this._promise = new Promise((r, j) => {\n      this.on('finish', () => {\n        let d\n        if (binary) {\n          d = Buffer.concat(this._caughtData)\n        } else {\n          d = joinBufferData(this._caughtData)\n        }\n        r(d)\n        this._caughtData = []\n      })\n      this.once('error', (e) => {\n        if (e.stack.indexOf('\\n') == -1) {\n          wrap`${e}`\n          j(e)\n        } else {\n          const stack = cleanStack(e.stack)\n          e.stack = stack\n          if (proxyError) wrap`${e}`\n          j(e)\n        }\n      })\n      if (rs) {\n        pipeError(this, rs).pipe(this)\n      }\n    })\n  }\n  _write(chunk, encoding, callback) {\n    this._caughtData.push(chunk)\n    callback()\n  }\n  /**\n   * A promise which will resolve will all data when the stream finishes.\n   * @type {Promise<string|Buffer>}\n   */\n  get promise() {\n    return this._promise\n  }\n}\n\n/**\n * Collect data into a catchment, and return results when the stream finishes.\n * @param {stream.Readable} readable A readable stream to collect all data from. If an error occurs during reading of this stream, the promise will be rejected with it.\n * @param {_catchment.CollectOptions} options Options when collecting data into a catchment. They can extend `Writable` options which will be passed to the `Catchment` constructor.\n * @param {boolean} [options.binary=false] Whether to return a raw buffer instead of a string. The string is created by joining all incoming chunks together with `.join('')` method. Default `false`.\n * @param {boolean} [options.proxyError=false] Sets whether an error emitted by the stream with have its stack start at the line where the `collect` was called rather than inside of the stream. In other words, hides the implementation of the stream. Default `false`.\n * @example\n *\n * import { collect } from 'catchment'\n * import { createReadStream } from 'fs'\n *\n * const rs = createReadStream(path)\n * await collect(rs, { proxyError: true })\n */\nexport const collect = async (readable, options = {}) => {\n  const { promise } = new Catchment({\n    rs: readable,\n    ...options,\n    er: erotic(true),\n  })\n  const res = await promise\n  return res\n}\n\n/* typal types/index.xml */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {_catchment.Options} Options Options to pass to the `Writable` super constructor, and others shown below.\n */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {Object} _catchment.Options Options to pass to the `Writable` super constructor, and others shown below.\n * @prop {!stream.Readable} [rs] A readable stream to automatically pipe into the catchment. If an error occurs during reading of this stream, the catchment promise will be rejected with it.\n * @prop {boolean} [binary=false] Whether to return a raw buffer instead of a string. The string is created by joining all incoming chunks together with `.join('')` method. Default `false`.\n */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {import('stream').Readable} stream.Readable\n */\n\n/* typal types/collect.xml */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {_catchment.CollectOptions} CollectOptions Options when collecting data into a catchment. They can extend `Writable` options which will be passed to the `Catchment` constructor.\n */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {Object} _catchment.CollectOptions Options when collecting data into a catchment. They can extend `Writable` options which will be passed to the `Catchment` constructor.\n * @prop {boolean} [binary=false] Whether to return a raw buffer instead of a string. The string is created by joining all incoming chunks together with `.join('')` method. Default `false`.\n * @prop {boolean} [proxyError=false] Sets whether an error emitted by the stream with have its stack start at the line where the `collect` was called rather than inside of the stream. In other words, hides the implementation of the stream. Default `false`.\n */\n","export default zlib\nexport const {\n  Deflate,\n  DeflateRaw,\n  Gunzip,\n  Gzip,\n  Inflate,\n  InflateRaw,\n  Unzip,\n  Z_BEST_COMPRESSION,\n  Z_BEST_SPEED,\n  Z_BLOCK,\n  Z_BUF_ERROR,\n  Z_DATA_ERROR,\n  Z_DEFAULT_COMPRESSION,\n  Z_DEFAULT_STRATEGY,\n  Z_ERRNO,\n  Z_FILTERED,\n  Z_FINISH,\n  Z_FIXED,\n  Z_FULL_FLUSH,\n  Z_HUFFMAN_ONLY,\n  Z_MEM_ERROR,\n  Z_NEED_DICT,\n  Z_NO_COMPRESSION,\n  Z_NO_FLUSH,\n  Z_OK,\n  Z_PARTIAL_FLUSH,\n  Z_RLE,\n  Z_STREAM_END,\n  Z_STREAM_ERROR,\n  Z_SYNC_FLUSH,\n  Z_VERSION_ERROR,\n  constants,\n  createDeflate,\n  createDeflateRaw,\n  createGunzip,\n  createGzip,\n  createInflate,\n  createInflateRaw,\n  createUnzip,\n  deflate,\n  deflateRaw,\n  deflateRawSync,\n  deflateSync,\n  gunzip,\n  gunzipSync,\n  gzip,\n  gzipSync,\n  inflate,\n  inflateRaw,\n  inflateRawSync,\n  inflateSync,\n  unzip,\n  unzipSync,\n} = zlib","import erotic from 'erotic'\nimport { collect } from 'catchment'\nimport { createGunzip } from 'zlib'\nimport { request as Request } from 'http' // eslint-disable-line\n\n/**\n * @param {!http.IncomingMessage} res\n */\nexport const isMessageGzip = (res) => {\n  /**\n   * @suppress {checkTypes}\n   */\n  const { 'content-encoding': contentEncoding } = res.headers\n  return contentEncoding == 'gzip'\n}\n\n/**\n * @param {typeof Request} request The actual http or https request function.\n * @param {!http.RequestOptions} requestOptions\n * @param {!Object} [config] Config object.\n * @param {boolean} [config.justHeaders] only return headers as soon as available. false\n * @param {boolean} [config.binary] return binary\n * @param {boolean} [config.er] erotic callback\n */\nconst makeRequest = (request, requestOptions, config = {}) => {\n  const { justHeaders, binary, er = erotic(true) } = config\n  /** @type {!http.ClientRequest} */\n  let req\n\n  /** @type {!http.IncomingHttpHeaders} */\n  let headers\n  /** @type {{statusMessage: string, statusCode: number}} */\n  let m\n  /** @type {string|!Buffer} */\n  let body\n  let rawLength = 0\n  let byteLength = 0\n\n  const promise = new Promise((r, j) => {\n    req = request(requestOptions, async (res) => {\n      ({ headers } = res)\n      const { statusMessage, statusCode } = res\n      m = { statusMessage, statusCode }\n      if (justHeaders) {\n        res.destroy()\n        r()\n        return\n      }\n      const isGzip = isMessageGzip(res)\n\n      res.on('data', data => rawLength += data.byteLength )\n\n      const rs = isGzip\n        ? res.pipe(createGunzip())\n        : res\n\n      body = await collect(rs, { binary })\n      byteLength = body.length\n\n      r()\n    })\n      .on('error', (error) => {\n        const err = er(error)\n        j(err)\n      })\n      .on('timeout', () => {\n        req.abort()\n      })\n  }).then(() => {\n    const r = {\n      body,\n      headers,\n      ...m,\n      rawLength,\n      byteLength,\n      parsedBody: null,\n    }\n    return r\n  })\n  return { req, promise }\n}\n\nexport default makeRequest\n\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {import('http').IncomingMessage} http.IncomingMessage\n */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {import('http').ClientRequest} http.ClientRequest\n */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {import('http').IncomingHttpHeaders} http.IncomingHttpHeaders\n */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {import('http').RequestOptions} http.RequestOptions\n */","import erotic from 'erotic'\nimport makeRequest from './make-request'\n\nexport const getFormData = (form = {}) => {\n  const urlEncodedDataPairs = Object.keys(form).reduce((acc, key) => {\n    const v = form[key]\n    const p = `${encodeURIComponent(key)}=${encodeURIComponent(v)}`\n    return [...acc, p]\n  }, [])\n\n  const d = urlEncodedDataPairs.join('&').replace(/%20/g, '+')\n  return d\n}\n\nexport const getData = (type, data) => {\n  switch (type) {\n  case 'json':\n    data = JSON.stringify(data)\n    type = 'application/json'\n    break\n  case 'form':\n    data = getFormData(data)\n    type = 'application/x-www-form-urlencoded'\n    break\n  }\n  return {\n    data,\n    contentType: type,\n  }\n}\n\nexport const exec = async (request, requestOptions,\n  { data, justHeaders, binary, er = erotic(true) },\n) => {\n  const { req, promise } = makeRequest(request, requestOptions, {\n    justHeaders,\n    binary,\n    er,\n  })\n  req.end(data)\n  const res = await promise\n\n  const isJson = isHeadersJson(res.headers)\n\n  if (isJson && res.body) {\n    try {\n      res.parsedBody = JSON.parse(res.body)\n    } catch (e) {\n      const err = er(e)\n      err.response = res.body\n      throw err\n    }\n  }\n\n  return res\n}\n\n/**\n * Check if the returned content-type starts with application/json.\n * @param {!http.IncomingHttpHeaders} headers\n */\nconst isHeadersJson = (headers) => {\n  /**\n   * @suppress {checkTypes}\n   */\n  const { 'content-type': contentType = '' } = headers\n  return contentType.startsWith('application/json')\n}\n\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {import('http').IncomingHttpHeaders} http.IncomingHttpHeaders\n */","import { request as https } from 'https'\nimport { request as http } from 'http'\nimport { debuglog } from 'util'\nimport erotic from 'erotic'\nimport { parse } from 'url'\nimport { getData, exec } from './lib'\n\nlet ua\ntry {\n  // require in index won't lead to --process_common_js_modules\n  const { 'version': version, 'name': name } = require('../package.json')\n  ua = name == '@rqt/aqt' ? `@rqt/aqt/${version}` : `@rqt/aqt via ${name}/${version}`\n} catch (err) {\n  ua = '@aqt/rqt'\n}\n\nconst LOG = debuglog('aqt')\n\n/**\n * Request a web page and return information including `headers`, `statusCode`, `statusMessage` along with the `body` (which is also parsed if JSON received).\n * @param {string} address The URL such as http://example.com/api.\n * @param {_rqt.AqtOptions} [options] Configuration for requests.\n */\nconst aqt = async (address, options = {}) => {\n  const {\n    data: d,\n    type = 'json',\n    headers: outgoingHeaders = {\n      'User-Agent': `Mozilla/5.0 (Node.JS) ${ua}`,\n    },\n    compress = true,\n    binary = false,\n    justHeaders = false,\n    method,\n    timeout,\n  } = options\n  const er = erotic(true)\n\n  const { hostname, protocol, port, path } = parse(address)\n  const isHttps = protocol === 'https:'\n  const request = isHttps ? https : http\n\n  const opts = {\n    hostname,\n    port,\n    path,\n    headers: {\n      ...outgoingHeaders,\n    },\n    timeout,\n    method,\n  }\n\n  let data\n  if (d) {\n    const _d = getData(type, d)\n      ; ({ data } = _d)\n    const { contentType } = _d\n\n    opts.method = method || 'POST'\n    if (!('Content-Type' in opts.headers)) {\n      opts.headers['Content-Type'] = contentType\n    }\n    if (!('Content-Length' in opts.headers)) {\n      opts.headers['Content-Length'] = Buffer.byteLength(data)\n    }\n  }\n  if (compress && !('Accept-Encoding' in opts.headers)) {\n    opts.headers['Accept-Encoding'] = 'gzip, deflate'\n  }\n\n  const {\n    body, headers, byteLength, statusCode, statusMessage, rawLength,\n    parsedBody,\n  } = await exec(request, opts, {\n    data,\n    justHeaders,\n    binary,\n    er,\n  })\n\n  LOG('%s %s B%s', address, byteLength, `${byteLength != rawLength ? ` (raw ${rawLength} B)` : ''}`)\n\n  /** @type {!_rqt.AqtReturn} */\n  const res = {\n    body: parsedBody ? parsedBody : body,\n    headers,\n    statusCode,\n    statusMessage,\n  }\n  return res\n}\n\nexport default aqt\n\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {import('../types').AqtOptions} _rqt.AqtOptions\n */\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {import('../types').AqtReturn} _rqt.AqtReturn\n */","import aqt from '@rqt/aqt'\n\n/**\n * An instance of a session class can maintain cookies.\n * @implements {_rqt.Session}\n */\nexport default class Session {\n  /**\n   * Create a new session that can be used to make requests in sequence, and remember cookies.\n   * @param {!_rqt.SessionOptions} options Options for a session.\n   */\n  constructor(options = {}) {\n    const {\n      host,\n      headers = {},\n    } = options\n\n    this.host = host\n    this.headers = headers\n    this.cookies = {}\n  }\n  /**\n   * Make a request and return the body.\n   * @param {string} location The URL to which to make a request.\n   * @param {!_rqt.AqtOptions} options Options for requests.\n   */\n  async rqt(location, options = {}) {\n    const { body } = await this._request(location, options)\n    /** @type {string} */\n    const r = body\n    return r\n  }\n  /**\n   * Make a request and return the body as buffer.\n   * @param {string} location The URL to which to make a request.\n   * @param {!_rqt.AqtOptions} options Options for requests.\n   */\n  async bqt(location, options = {}) {\n    const { body } = await this._request(location, {\n      ...options,\n      binary: true,\n    })\n    /** @type {!Buffer} */\n    const r = body\n    return r\n  }\n  /**\n   * Make a request and return the parsed JSON body as an object.\n   * @param {string} location The URL to which to make a request.\n   * @param {!_rqt.AqtOptions} options Options for requests.\n   */\n  async jqt(location, options = {}) {\n    const { body } = await this._request(location, options)\n    /** @type {!Object} */\n    const r = body\n    return r\n  }\n  getFullUrl(location) {\n    if (this.host) {\n      return `${this.host}${location}`\n    }\n    return location\n  }\n  /**\n   * Make a request and return the body, headers and status.\n   * @param {string} location The URL to which to make a request.\n   * @param {!_rqt.AqtOptions} options Configuration for requests.\n   */\n  async aqt(location, options = {}) {\n    const res = await this._request(location, options)\n    return res\n  }\n  async _request(location, options = {}) {\n    const loc = this.getFullUrl(location)\n    const opts = getAllOptions(this.headers, options, this.Cookie)\n    const res = await aqt(loc, opts)\n    const { headers } = res\n    this.cookies = updateCookies(this.cookies, headers)\n    return res\n  }\n  get Cookie() {\n    return getCookieHeader(this.cookies)\n  }\n}\n\nconst getAllOptions = (sessionHeaders, options, Cookie) => {\n  const {\n    headers = {},\n    ...opts\n  } = options\n  return {\n    ...opts,\n    headers: {\n      ...sessionHeaders,\n      ...headers,\n      Cookie,\n    },\n  }\n}\n\nconst getCookieHeader = (cookies) => {\n  const r = Object.keys(cookies).reduce((acc, key) => {\n    const val = cookies[key]\n    const s = `${key}=${val}`\n    return [...acc, s]\n  }, [])\n  return r.join('; ')\n}\n\n/**\n * @param {!Object} cookies\n * @param {!http.IncomingHttpHeaders} headers\n */\nconst updateCookies = (cookies, headers) => {\n  const newCookies = extractCookies(headers)\n  const r = {\n    ...cookies,\n    ...newCookies,\n  }\n  const res = Object.keys(r).reduce((acc, current) => {\n    const val = r[current]\n    if (!val) return acc\n    return {\n      ...acc,\n      [current]: val,\n    }\n  }, {})\n  return res\n}\n\nconst extractCookie = c => {\n  const res = /^(.+?)=(.*?);/.exec(c)\n  if (!res) throw new Error(`Could not extract a cookie from ${c}`)\n  const [, name, value] = res\n  return {\n    [name]: value,\n  }\n}\nconst extractCookies = ({ 'set-cookie': setCookie = [] } = {}) => {\n  return setCookie.reduce((acc, current) => {\n    const c = extractCookie(current)\n    return {\n      ...acc,\n      ...c,\n    }\n  }, {})\n}\n\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {import('@rqt/aqt').AqtOptions} _rqt.AqtOptions\n */","import '../types/externs'\nimport rqt, { aqt, bqt, jqt, Session } from './'\n\nmodule.exports = {\n  '_rqt': rqt,\n  '_aqt': aqt,\n  '_bqt': bqt,\n  '_jqt': jqt,\n  '_Session': Session,\n}","import aqt from '@rqt/aqt'\n\n/**\n * Request an HTTP page and return the response body as a string.\n * @param {string} address Url such as http://example.com/api.\n * @param {_rqt.AqtOptions} [options] Options for requests.\n */\nexport const rqt = async (address, options = {}) => {\n  const { body } = await aqt(address, options)\n  /** @type {string} */\n  const r = body\n  return r\n}\n\n/**\n * Request an HTTP page and return the response body as an object.\n * @param {string} address Url such as http://example.com/api.\n * @param {_rqt.AqtOptions} [options] Options for requests.\n */\nexport const jqt = async (address, options = {}) => {\n  const { body } = await aqt(address, options)\n  /** @type {*} */\n  const r = body\n  return r\n}\n\n/**\n * Request a page and return the body as a buffer.\n * @param {string} address The URL such as http://example.com/api.\n * @param {_rqt.AqtOptions} [options] Options for requests.\n */\nexport const bqt = async (address, options) => {\n  const c = {\n    ...options,\n    binary: true,\n  }\n  const  { body } = await aqt(address, c)\n  /** @type {Buffer} */\n  const r = body\n  return r\n}\n\n/**\n * @suppress {nonStandardJsDocs}\n * @typedef {import('@rqt/aqt').AqtOptions} _rqt.AqtOptions\n */\n\n// /**\n//  * Request a page and return the body as a stream.\n//  * @param {string} address Url such as http://example.com/api\n//  * @param {Options} [config] Options for requests.\n//  * @param {*} [config.data] Optional data to send to the server with the request.\n//  * @param {'form'|'json'} [config.type=\"'json'\"] How to send data: `json` to serialise JSON data and `form` for url-encoded transmission with `json` mode by default. Default `'json'`.\n//  * @param {http.OutgoingHttpHeaders} [config.headers] Headers to use for the request.\n//  * @param {boolean} [config.compress=true] Add the `Accept-Encoding: gzip, deflate` header to indicate to the server that it can send a compressed response. Default `true`.\n//  * @param {string} [config.method] What HTTP method to use in making of the request. When no method is given and `data` is present, defaults to `POST`.\n//  * @param {number} [config.timeout] Timeout after which the request should cancel.\n//  */\n// export const srqt = async (address, config) => {\n//   throw new Error('not implemented')\n//   // config.binary = true\n//   // const  { body } = await arqt(address, config)\n//   // return body\n// }\n"],
"names":["request","https","http","debuglog","util","getStackSegment","stack","from","oneLine","splitStack","split","undefined","item","length","slice","items","join","getEntryStack","transparent","stackSegment","getCallerFromArguments","args","caller","homedir","os","extractPathRegex","pathRegex","homeDir","cleanStack","pretty","ignoredModules","re","RegExp","source","replace","j","filter","x","pathMatches","match","includes","test","trim","map","m","p1","makeCallback","entryCaller","entryStack","shadow","cb","messageOrError","arguments","errorStack","Error","calleeStackLine","message","isError","stackMessage","stackHeading","Object","assign","e","properties","erotic","parse","url","Writable","stream","pipeError","streamA","streamB","once","emit","Catchment","options","binary","rs","er","proxyError","wrap","_","opts","_caughtData","_promise","Promise","r","on","d","Buffer","concat","indexOf","pipe","chunk","encoding","callback","push","collect","readable","promise","res","createGunzip","zlib","isMessageGzip","contentEncoding","headers","makeRequest","requestOptions","config","justHeaders","req","body","rawLength","byteLength","then","statusMessage","statusCode","destroy","isGzip","data","error","err","abort","parsedBody","getFormData","form","keys","reduce","urlEncodedDataPairs","acc","key","v","p","encodeURIComponent","exec","end","contentType","startsWith","JSON","response","ua","version","name","require","LOG","aqt","address","type","outgoingHeaders","compress","method","timeout","hostname","protocol","port","path","stringify","_d","_request","location","loc","getFullUrl","host","Cookie","sessionHeaders","cookies","updateCookies","Session","getCookieHeader","s","val","newCookies","extractCookies","current","setCookie","value","c","module","exports","rqt","bqt","jqt"]
}
